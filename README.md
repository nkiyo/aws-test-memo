aws
============

## データベース・ストレージ
### RDB
- RDS
    - マルチ AZ 配置→自動フェイルオーバ。他AZのスレーブへは同期レプリケーション。コストは二倍かかる
    - DBインスタンス、保存データ、自動バックアップとスナップショットを暗号化できる
    - 利用中にインスタンスタイプを縮小可能
    - Auto-Scaling。増加するデータベースのワークロードに応じて、RDSのストレージ容量がダウンタイムなしで自動的にスケール。
    - フェイルオーバは手動で実施することができる
    - RDS PostgreSQLでは、ファイルシステムとの連携がサポートされていない
    - リードレプリカ最大5台。Aurora15台
    - 同じリージョンの別AZにスレーブを構築します。
- Aurora
    - マルチマスター機能によって別AZにWriterのマスターをマルチ構成
    - 最大 15 個のAuroraレプリカを、1つのAWSリージョンの中でDBクラスターが処理するアベイラビリティーゾーン全体に分散できる
    - マルチAZに跨って仮想ボリュームを構成

### NoSQLなど、非RDB
- DynamoDB
    - DynamoDB Accelerator (DAX)。DynamoDBと互換性のあるフルマネージド型のインメモリキャッシュサービス
    - グローバルテーブル。マルチリージョンにマルチマスターデータベース
    - AZ間でデータを自動的に複製
    - グローバルに分散したユーザーがいる場合に、大規模にスケールされたアプリケーションを使用する場合に最適です。どこにいても、低レイテンシーでデータにアクセスすることができます。
    - オンデマンドキャパシティーモード
    - 強い整合性のある読み込みも選択可能
    - 同じリージョン内の他Amazon Webサービス間で転送データには追加料金はかからない
    - 継続的バックアップを有効にすることで、バックアップを継続的に実施
    - JOIN／TRANSACTION／COMMIT／ROLLBACKが必要な複雑な処理には向いていません。
    - クロスリージョンレプリケーションを実行するためには、まずはDynamoDB Streamsを有効化する必要があります
    - 利用負荷があらかじめ予測できる場合はプロビジョンドスループットを選択します。利用負荷があらかじめ予測できない場合はオンデマンドキャパシティーモードを選択します
    - リージョン間で転送されるデータは、転送の両側で課金されます。
- EMR
    - ビッグデータ処理
    - Apache Spark、Apache Hive、Apache HBase、Apache Flink、Presto などのオープンソースのツールと、Amazon EC2 とAmazon S3 ストレージを組み合わせ
        - MACHINE LEARNING
        - 抽出、変換、読み込み (ETL)
        - クリックストリーム分析
        - リアルタイムストリーミング
        - インタラクティブ分析
        - ゲノミクス
- Redshift
    - ビッグデータ分析に特化。処理はしない。
    - リレーショナルデータベースサービス
- Neptune。グラフDB。
- Amazon Keyspaces
    - Apache Cassandra互換のデータベースサービス
    - 大量の構造化データを保存、取得、管理
- Memcached
    - 複数のコアまたはスレッドを持つ大きなノードを実行する
    - キーストアに永続性がない。
    - バックアップと復元の機能がない

### ストレージ
- S3
    - アクセスコントロールポリシー
    - バケットポリシー
    - パブリックアクセスブロック
    - One Zone-IA。アクセス頻度が低いデータを単一アベイラビリティーゾーンに保存することで保存コストを節約。
    - Standard-IA。低頻度アクセス用。Standardより安価。
    - Intelligent Tiering
    - AZ間でデータを自動的に複製
    - 特定リージョンに配置
    - 料金は、データ容量、取得リクエスト数、設置場所などで決定。
    - S3 オブジェクトのサイズは、最低 0 バイトから最大 5 テラバイトまで
    - 99.999999999%という"イレブンナイン"の耐久性を実現しています。なお、可用性については99.99%
- Glacier
    - デフォルトてデータ暗号化
- EBS
    - スナップショットはS3に保存される
    - スナップショット作成時はデータ整合性を保つため静⽌点を設けることが推奨されている
    - デフォルト設定ではEC2インスタンスが削除されると、EBSのデータも削除される
    - デフォルトでAZ内の複数サーバーにデータがレプリケーションして冗長化
    - EBSのスナップショットは増分バックアップ
    - デフォルトでは、EC2削除と同時にEBSも削除。
- EFS
    - EC2間の共有ファイルストレージとして利用
    - AWS DataSync は、オンプレミスストレージと Amazon EFS の間でデータを迅速かつ簡単に移動することができるマネージド型のデータ転送サービスです。
    - オープンソースツールと比べて最大 10 倍の速度で、アクティブなデータセットを AWS Direct Connect またはインターネット経由で転送できます
- Storage Gateway
    - オンプレミス環境から、AWS上への実質無制限のクラウドストレージへのアクセスを提供するハイブリッドクラウドストレージサービスです
    - S3をオンプレミスストレージのバックアップとして利用することができます
- 自動バックアップするデータベース。RDS、Redshift、ElastiCache(※Redisのみ)


## コスト管理、見積もり
- AWS 料金計算ツール
    - 月間AWS請求書をより効率的に見積もるのに役立つ
    - 他のサービスプロバイダーと比較
    - サービスを特定して、その利用時間やリクエスト数などから見積もる
- 簡易見積もりツール => 廃止される
- TCO計算ツール
    - AWSを利用する際の総コストを算出するツール
- Cost Explorer
    - 月額コストの予測分析
- Billing and Cost Management コンソールダッシュボード
    - 請求タグで、今月の初めから今日までのサービス別の利用料金を確認できる
    - 過去情報も確認できる
- AWS のコストと使用状況レポート
- リザーブ購入できるサービス
    - EC2リザーブドインスタンス
    - RDSリザーブドインスタンス
    - ElastiCacheリザーブドノード
    - DynamoDBリザーブドキャパシティ
    - Redshiftリザーブドノード
    - S3, EFSは未対応


## 環境構築系
- AWS Elastic Beanstalk
    - Java、.NET、PHP、Node.js、Python、Ruby、Go および Docker を使用して開発されたウェブアプリケーションを、Apache、Nginx、Passenger、IIS など一般的なサーバーにより、デプロイとスケーリングするサービス
    - キャパシティのプロビジョニング、ロードバランシング、Auto Scaling からアプリケーションのヘルスモニタリングまで、デプロイを自動的に処理
    - Git リポジトリ、または Eclipse や Visual Studio などの統合開発環境 (IDE) を使用してアプリケーションをアップロード
    - 停止したサービスを自動的に再起動
- AWS OpsWorks
    - chef
    - puppet
    - OpsWorksを使用してAmazon EC2インスタンスを作成した後、Amazon EC2コンソールを使用して停止した場合、AWS OpsWorks自動修復機能はインスタンスを失敗として分類し、再起動します。
- CodeDeploy
    - ソフトウェアのデプロイ自動化
    - CodePipelineから起動される
- CodePipeline
    - 完全マネージド型の継続的デリバリーサービスで、素早く確実性のあるアプリケーションとインフラストラクチャのアップデートのための、パイプラインのリリースを自動化します。
    - コードチェンジがあった場合のフェーズの構築、テスト、デプロイを自動化します。これにより、機能とアップデートを素早く、信頼性の高い方法で配信できます。GitHub やお好みのカスタムプラグインなどのサードパーティ製のサービスと、AWS CodePipeline を簡単に統合することができます

## 計算機系
- EC2
    - 特定のアベイラビリティゾーンに設置
    - クラスタープレイスメントグループ。アベイラビリティーゾーン内でインスタンスをまとめます。この戦略により、低レイテンシーネットワークパフォーマンスを実現できます。
    - 何もVPCを設定していないままに、EC2インスタンスを作成すると、デフォルトVPCのデフォルトのパブリックサブネットにEC2インスタンスが設置されます。
- Fargate
    - サーバーレス
    - ECSとEKSの両方で動作する
    - サーバーのプロビジョンと管理が不要
- EC2 リザーブドインスタンス（スタンダード）
    - コンバーティブルより割引率が高い
    - マーケットプレイスで売れる
- EC2 リザーブドインスタンス（コンバーティブル）
    - スタンダードでは変更できない設定を変更可能
        - インスタンスファミリー
        - OS
        - テナンシー
        - 支払オプション
- EC2 スケジュールドリザーブドインスタンス
    - EC2の「買い方」の一つ
    - 「１年間」「３年間」と期間を決めて「Reserved(予約)」する事で格安に
- Lightsail
    - 仮想サーバー、ストレージ、データベース、およびネットワーキングを予測可能な低価格で提供するサービス
    - EC2は仮想サーバーを構築するサービスですが、仮想プライベートサーバー（VPS）を提供するサービスではありません。
- Dedicated host。専用の物理サーバをプロビジョニングし、その上でEC2インスタンスを起動できるサービスです。
- API Gateway
    - APIを生成・管理することができる
    - WEBSocketを利用した双方通信が可能である
    - EC2／Lambda／任意のウェブアプリケーションの        ワークロード処理を実行する
    - 最大数十万個のAPI同時呼び出し・受付が可能
- AWS Batch
    - 数十万のバッチコンピューティングジョブを簡単に実現できます。AWS Batch は、コンピューティングリソース (CPU やメモリ最適化インスタンスなど) の最適な数量とタイプを、送信されたバッチジョブの量と具体的なリソース要件に基づいて動的にプロビジョニングします。
- Lambda


## インフラ、トラフィック制御系
- Route53
    - トラフィックフロー
    - WAFは適用されない
- NATゲートウェイ
    - プライベートサブネットのインスタンスからインターネットへのアクセスを可能にするため、パブリックサブネットに設置する。で、プライベートサブネットのルートテーブルにNATゲートウェイへのルートを設定することが必要。
    - プライベートサブネットからのパブリックサブネットに送信されるトラフィックに対してアドレス変換処理をして、インターネットゲートウェイへとトラフィックを渡す
    - インターネットゲートウェイとの違いは？
    - SQL インジェクションやクロスサイトスクリプティングなどの一般的な攻撃パターンをブロックするセキュリティルールを作成できる
- VPC
    - リージョンを指定して設置する
    - AWSアカウントを登録すると各リージョンにデフォルトVPCが１つずつ自動で設置される
    - ステートレスである
    - VPC構成前にEC2を立ち上げた場合、デフォルトVPCのデフォルトのパブリックサブネットにEC2が設置される
    - 中国の国内外間では、VPC Pearing不可。
- VPCピアリング
- アベイラビリティーゾーン AZ
    - AZは１つ以上のデータセンターで構成されており、大きなところでは複数のデータセンターが利用されている
- リージョン
     - Direct Connect Gateway を使用すると、複数の AWS リージョンにまたがって接続を確立できる
    - AWSアカウントを立ち上げると自動的に利用可能な全リージョンにデフォルトVPCが設定されます。   
- サブネット
    - １つのサブネットで１つのAZを指定して設置する
- Elastic IP アドレス
    - IPアドレスが変更されない静的な IPv4 アドレス。インターネットアクセスに必須ではない。
    - EC2 インスタンスに一つ関連付けられている限り、料金は発生しない。
- Direct Connect
    - AWS とお客様のデータセンター、オフィス、またはコロケーション環境との間にプライベート接続を作成することができます。これにより帯域幅スループットが増加し、インターネットベースの接続と比較して、より一貫性の高いサービスを実現できます。
- AWS Global Accelerator
    - アプリケーションの可用性とパフォーマンスを改善するネットワークサービスです。
    - AWS がホストするアプリケーションに対して固定エントリポイントとして機能する静的 IP アドレスを提供する
- CloudFront
    - AWSからのデータ転送アウトと、ユーザーからのリクエストとトラフィック分散に基づいて料金
    - リージョナルエッジキャッシュというロケーションが追加されましたが、ユーザー側で選択可能ではありません
- ELB
    - Connection Drainingは、インスタンスが登録解除される場合、またはインスタンスで異常が発生した場合に、そのバックエンドインスタンスへの新規リクエスト送信を中止する機能
    - SSL TerminationはHTTPS暗号化および復号化プロセス全体（一般にSSLターミネーションと呼ばれます）をElastic LoadBalancerで処理するように調整する機能
    - 負荷分散機能は複数のAZに起動する複数のEC2インスタンスにトラフィックの負荷を分散する機能
- ALB Application Load Balancer
    - URL パスに基づいてリクエストを転送するルールを持つリスナーを作成できます
- CLB Classic Load Balancer
    - サブドメイン構成により、ルーティングを設定する
- NLB Network Load Balancer
    - L4に対応
    - 毎秒数百万のリクエストに対応できる能力があります。
    - コンテナ化されたアプリケーションのサポート

## ファイアウォール
- WAF Web Application Firewall
    - 可用性、セキュリティ侵害、リソースの過剰消費に影響を与えるような、ウェブの脆弱性を利用した一般的な攻撃やボットから、ウェブアプリケーションまたは API を保護するウェブアプリケーションファイアウォールです
    - どこに設置する？
- セキュリティグループ
    - EC2インスタンスへのアクセスを許可し、トラフィックを制御するファイアウォール
    - セキュリティグループは、サブネットレベルでなくインスタンスレベルで動作
    - 許可ルールを指定できます。拒否ルールは指定できません。
    - インバウンドトラフィックとアウトバウンドトラフィックのルールを指定できます。
    - セキュリティグループ作成時点ではインバウンドルールはありません。したがって、インバウンドルールをセキュリティグループに追加するまで、別のホストからインスタンスに送信されるインバウンドトラフィックは許可されません。
    - セキュリティグループはステートフルです。許可されたインバウンドトラフィックに対応した戻りのトラフィック（アウトバウンドトラフィック）は、アウトバウンドルールの有無にかかわらず、許可されます。ネットワークACLがステートレスです。
- ネットワークACL。
    - VPCサブネットのファイアウォールとして動作し、インバウンドトラフィックとアウトバウンドトラフィックの両方をサブネットレベルでコントロール

## モニタリング、システム解析
- CloudTrail
    - 運用監査、リスク監査
    - ユーザーアクティビティログを取得
    - CloudWatch、S3にログを？送る
- CloudWatch
    - AWS上で稼働するシステム監視サービスで、死活監視、性能監視、キャパシティ監視
    - EC2上のアプリケーションのログやAWSマネージドサービスのログを取得
    - AWSリソースに対するイベントをトリガーにアクションを実行できます。
    - コンプライアンスと脆弱性のリアルタイム監査を提供するサービスではなく、一般的なシステムのモニタリングサービスです。
    - 請求アラートを有効にすると、支出の追跡と管理が簡単になります。アカウントの請求が指定したしきい値を超えると、アラームがトリガーされます。
- CloudWatch Logs
    - トラフィックのログファイルの監視、保存、アクセス
- CloudWatchエージェント
- CloudTrail
- Trusted Adviser
    - フル機能はビジネスまたはエンタープライズサポートプランで利用可能
    - ユーザーの AWS 環境を分析し、推奨ベストプラクティスを次の 5 つのカテゴリで提供します。コストの最適化、パフォーマンス、セキュリティ、耐障害性、サービスの制限。
- AWS Config
    - AWS リソース間の設定や関連性の変更状況を確認して、詳細なリソース設定の履歴を調べることできます。これにより、AWSリソース構成が社内基準に即しているのか検証することができ、コンプライアンス上のモニタリングを実行できます。
    - ルールから逸脱するリソース設定や設定変更が生じると、自動的に Amazon Simple Notification Service (SNS) 通知がトリガーされるため、コンプライアンスギャップを特定できます
- AWS X-Ray
    - 本番環境や分散アプリケーション (マイクロサービスアーキテクチャを使用して構築されたアプリケーションなど) を分析およびデバッグできます
    - シンプルな 3 層アプリケーションから数千のサービスで構成される複雑なマイクロサービスアプリケーションまで、さまざまなアプリケーションを分析できます。
- Amazon GuardDuty
    - 悪意のある操作や不正な動作を継続的にモニタリングする脅威検出サービス
- Access Advisor
    - IAMエンティティ(ユーザー、グループ、ロール) が最後にAWSサービスにアクセスした⽇付と時刻が表⽰。なお、CloudTrailはAWSインフラストラクチャ全体でアカウントアクティビティをログに記録する。
- Personal Health Dashboard
    - パーソナライズされた表示
    - トラブルシューティングガイダンス

## 運用系
- AWS Organization？
- AWS System Manager
    - アプリケーション、環境、リージョン、プロジェクト、キャンペーン、ビジネスユニット、ソフトウェアライフサイクルなど、目的やアクティビティごとに AWS リソースをグループ化
    - AWS リソースに関連する運用作業項目を一元的に表示、調査、および解決
    - さまざまなメンテナンスおよびデプロイタスクを自動化またはスケジュール

## 教育、コンサル
- コンシェルジュサポート
    - エンタープライズサポートプランの一部
    - シニアカスタマーサービスプロフェッショナルが、ユーザーからの請求、アカウントに関するお問い合わせに迅速かつ効率的に回答
- テクニカルアカウントマネージャー（TAM）
    - エンタープライズプランのユーザーのための、技術的支援
- AWSプロフェッショナルサービス？
- AWS 不正使用対策チーム
    - AWS リソースが不正処理に使用されている場合、連絡することが求められています
- AWSサポートのビジネスプラン
    - チャットサポートが含まれています。
- Infrastructure Event Management
    - ビジネスを左右する重要な時期にガイダンスやリアルタイムのサポートを受けることができます。AWS エキスパートがイベントの計画に関わり、アーキテクチャや運用に関するガイダンスやアプローチを教えてくれたり、リアルタイムのサポートを提供してくれます。

## メディア
- Amazon Elastic Transcoder
    - メディア変換サービスです。高度なスケーラビリティ、使いやすさ、高い費用効率性を実現する設計で、開発者や企業は、メディアファイルをその元のソース形式からスマートフォン、タブレット、PC などのデバイスで再生可能できるバージョンに変換
- Kinesis Video Streams
    - 数百万のデバイスからストリーミングビデオデータを取り込むことができるストリーミング処理サービス

## セキュリティ
- Amazon KMS
    - キーを簡単に作成および管理し、幅広い AWS のサービスやアプリケーションで暗号化の使用を制御できる
    - 独自の管理インフラストラクチャのキーを利用可能
    - RDS,S3の暗号化に使える
    - カスタマーマスターキー (CMK) はデータ暗号化キーへのアクセスを制御するために使用されます
- AWS CloudHSM
    - クラウドベースのハードウェアセキュリティモジュール (HSM) です。これにより、AWS クラウドで暗号化キーを簡単に生成して使用できるようになります。こちらは暗号化キーのコンプライアンス対応として利用する
    - 業界標準の API を使用して、カスタムアプリケーションを統合できます
- Cognito
    - ウェブアプリケーションおよびモバイルアプリに素早く簡単にユーザーのサインアップ/サインインおよびアクセスコントロールの機能を追加できます。

## 移行、バックアップ
- AWS Snowball Edge
    - 機械学習、ビデオ分析
- AWS SMS AWS Server Migration Service
    - 多数のオンプレミスワークロードを迅速にAWSに移行する
    - オンプレミスの VMware vSphere、Microsoft Hyper-V/SCVMM、または Azure 仮想マシンの AWS クラウドへの移行を自動化
- AWS Application Discovery Service ADS
   - オンプレミス環境にあるアプリケーションに対するプロファイルが自動的に作成されて以降に必要なデータを取得できます。このサービスはAWS へのアプリケーションの迅速かつ確実な移行計画を立案する際に利用できます。
- AMI
    - 特定の AWS アカウントと共有することができます。
    - AMI = EBSスナップショット + α(管理情報)。AMIにはEBSのスナップショットにあたる情報も格納されている。
    - AMIからEBS復元できる
- AMIのゴールデンイメージ
    - そのリソースの最適な状態のAMIやスナップショット
    - 起動時間を短縮し、構成サービスまたはサードパーティのリポジトリへの依存関係を削除します。

## ほか
- サービスコントロールポリシー (SCP)
    - Organization Unit(OU）を管理するために使用するポリシー
- AWS Artifact
    - セキュリティおよびコンプライアンスレポートと特定のオンライン契約にオンデマンドでアクセスできます
    - AWS の監査人が作成したレポート、認証、認定、その他のサードパーティーによる認定情報に、オンデマンドでアクセス
- Directory Service
    - Simple AD。AWS上にAWS Managed Microsoft AD の機能のサブセットを構築することができます。
    - Managed Microsoft AD。Active Directory 管理センターや Active Directory ユーザーとコンピュータなどの使い慣れたツールを使用して、AWS Managed Microsoft AD 内のユーザーやデバイスを管理することができます。
    - AD Connector。AWS Directory Service を既存のエンタープライズディレクトリに接続することができます。
- SNS
    - 送信側がトピックを作成して受信側をポリシー指定することで制御された非同期通信を実現
    - フルマネージド型のプッシュ型通知サービス
    - メッセージには永続性はありません。SQSのメッセージには永続性があります。
    - メッセージ方式としてメール通信は可能です。
- SQS
- Amazon connect
    - カスタマーコンタクトセンターのセットアップと管理が簡単に
- CodeBuild
    - ソースコードをコンパイルし、テストを実行し、デプロイ可能なソフトウェアパッケージを作成できる完全マネージド型のビルドサービスです。CodeBuild により、ビルドサーバーのプロビジョニング、管理、スケーリングが不要になります。
- CodeCommit
    - CodeCommit は、プライベート Git リポジトリをホストする、安全で高度にスケーラブルなマネージド型のソース管理サービスです。


## AWS用語

- IAM ロールとIAMポリシーの違い
- Service Catalog
    - AWS での使用が承認された IT サービスのカタログを作成および管理できます
    - AWS Service Catalog により、デプロイ済みの IT サービスやアプリケーション、リソース、さらにメタデータを、一元的に管理できるようになります
- 弾力性
- 規模の経済

- リージョナルエッジキャッシュ
- AWS CLI
    - アクセスキー、シークレットアクセスキー、AWS リージョン、出力形式の入力が求められます
- リソースグループツール
    - プロジェクトと使用するリソースに基づいて情報を整理および統合するカスタムコンソールを作成できます。
- Auto-Scaling
    - ターミネーションポリシー。デフォルトではOldestLaunchConfigurationからClosestToNextInstanceHourの順番に適用していきます。これにより、最も古い起動設定のインスタンスから削除します。
    - ELBのターゲットグループを設定すれば、ELB構成されたEC2インスタンス群に対して、AutoScalingを設定することが可能
- パブリックホストゾーン
    - あるドメイン、たとえば example.com とそのサブドメイン (acme.example.com や zenith.example.com) のトラフィックをインターネットまたは特定のドメインでルーティングする方法についての情報を保持するインターネット上に公開されたDNSドメインレコードを管理するコンテナのことです。
- ブートストラップ（Bashスクリプトによる自動化）
    - EC2インスタンスを起動する際に設定することで、自動ブートストラップアクションを実行できます。これはソフトウェアをインストールしたり、データをコピーしてそのリソースを特定の状態にするスクリプト

### 概念、考え方
- AWS Pay-As-You-Go
    - 従量課金
- 管理者権限アクセス
- パワーユーザー
    - IAMの操作権限以外の全てのAWSサービスへのフルアクセス権限を有しています
- ルートアカウント
    - ルートユーザーのアクセスキーがある場合は、削除します
    - ルートアカウントは基本的には利用しないで、IAMユーザーの管理者権限によって通常の管理を実施することになります。
    - 管理者権限アクセスをデフォルトで有しています

- 責任共有モデル
    - 継承される統制、共有統制、ユーザ固有の３種類。
    - 責任範囲はサービスによって変わる
- AWSセキュリティの利点
    - 1 データの安全な保護
    - 2 コンプライアンス要件を満たす
    - 3 節約
    - 4 迅速な拡張
- Well Architected Frameworkの基本原則
    - 運用上の優秀性
    - セキュリティ
    - 信頼性
    - パフォーマンス効率
    - コスト最適化
- AWSのベストプラクティス
    - スケーラビリティ
    - デプロイ可能なリソース
    - 環境の自動化
    - 疎結合化
    - サーバーの代わりのマネージドサービス
    - 柔軟なデータストレージオプション
- AWSセキュリティブログ
- 証明可能な安全性
- ホワイトペーパー
- 継承される統制
- 自動プロビジョニング
    - AutoScalingと同義
- IAMポリシーにおけるインラインポリシー
    - 通常、インラインポリシーではなく、管理ポリシーを使用することがAWSではお勧め。ユーザーが⾃⾝で作成および管理するポリシーであり、プリンシパルエンティティにアタッチすることができます。

